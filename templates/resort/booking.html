{% extends 'resort/base.html' %}
{% load static %}

{% block title %}Book Your Stay - Banbas Resort{% endblock %}

{% block content %}
<!-- Booking Hero Section -->
<section class="booking-hero" style="background: linear-gradient(rgba(0, 102, 204, 0.8), rgba(23, 162, 184, 0.8)), url('https://via.placeholder.com/1200x400/0066cc/ffffff?text=Book+Your+Stay'); background-size: cover; background-position: center; padding: 120px 0 80px;">
    <div class="container">
        <div class="text-center text-white">
            <h1 class="display-4 fw-bold mb-3">Book Your Perfect Getaway</h1>
            <p class="lead">Experience luxury and comfort at Banbas Resort</p>
        </div>
    </div>
</section>

<!-- Booking Form Section -->
<section class="section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="booking-form-container">
                    <!-- Quick Booking Bar -->
                    <div class="quick-booking-bar">
                        <div class="row g-3">
                            <div class="col-lg-3 col-md-6">
                                <label class="form-label">Check-in Date</label>
                                <input type="date" id="quick-checkin" class="form-control" required>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <label class="form-label">Check-out Date</label>
                                <input type="date" id="quick-checkout" class="form-control" required>
                            </div>
                            <div class="col-lg-2 col-md-4">
                                <label class="form-label">Guests</label>
                                <select id="quick-guests" class="form-select">
                                    <option value="1">1 Guest</option>
                                    <option value="2" selected>2 Guests</option>
                                    <option value="3">3 Guests</option>
                                    <option value="4">4 Guests</option>
                                    <option value="5">5+ Guests</option>
                                </select>
                            </div>
                            <div class="col-lg-2 col-md-4">
                                <label class="form-label">Rooms</label>
                                <select id="quick-rooms" class="form-select">
                                    <option value="1" selected>1 Room</option>
                                    <option value="2">2 Rooms</option>
                                    <option value="3">3 Rooms</option>
                                    <option value="4">4+ Rooms</option>
                                </select>
                            </div>
                            <div class="col-lg-2 col-md-4">
                                <label class="form-label">&nbsp;</label>
                                <button type="button" id="check-availability" class="btn btn-primary w-100">Check Availability</button>
                            </div>
                        </div>
                    </div>

                    <!-- Main Booking Form -->
                    <div class="main-booking-form">
                        <div class="row">
                            <!-- Booking Details -->
                            <div class="col-lg-8">
                                <form id="booking-form" method="post">
                                    {% csrf_token %}
                                    
                                    <!-- Form Errors -->
                                    {% if form.non_field_errors %}
                                        <div class="alert alert-danger mb-4">
                                            <strong>Please fix the following errors:</strong>
                                            <ul class="mb-0 mt-2">
                                                {% for error in form.non_field_errors %}
                                                    <li>{{ error }}</li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    {% endif %}
                                    
                                    <!-- Guest Information -->
                                    <div class="form-section">
                                        <h3 class="section-title">
                                            <i class="fas fa-user text-primary me-2"></i>Guest Information
                                        </h3>
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label for="{{ form.first_name.id_for_label }}" class="form-label">First Name *</label>
                                                {{ form.first_name }}
                                                {% if form.first_name.errors %}
                                                    <div class="text-danger small">{{ form.first_name.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="col-md-6">
                                                <label for="{{ form.last_name.id_for_label }}" class="form-label">Last Name *</label>
                                                {{ form.last_name }}
                                                {% if form.last_name.errors %}
                                                    <div class="text-danger small">{{ form.last_name.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="col-md-6">
                                                <label for="{{ form.email.id_for_label }}" class="form-label">Email Address *</label>
                                                {{ form.email }}
                                                {% if form.email.errors %}
                                                    <div class="text-danger small">{{ form.email.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="col-md-6">
                                                <label for="{{ form.phone.id_for_label }}" class="form-label">Phone Number *</label>
                                                {{ form.phone }}
                                                {% if form.phone.errors %}
                                                    <div class="text-danger small">{{ form.phone.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="col-12">
                                                <label for="{{ form.address.id_for_label }}" class="form-label">Address</label>
                                                {{ form.address }}
                                                {% if form.address.errors %}
                                                    <div class="text-danger small">{{ form.address.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Stay Details -->
                                    <div class="form-section">
                                        <h3 class="section-title">
                                            <i class="fas fa-calendar-alt text-primary me-2"></i>Stay Details
                                        </h3>
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label for="{{ form.checkin_date.id_for_label }}" class="form-label">Check-in Date *</label>
                                                {{ form.checkin_date }}
                                                {% if form.checkin_date.errors %}
                                                    <div class="text-danger small">{{ form.checkin_date.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="col-md-6">
                                                <label for="{{ form.checkout_date.id_for_label }}" class="form-label">Check-out Date *</label>
                                                {{ form.checkout_date }}
                                                {% if form.checkout_date.errors %}
                                                    <div class="text-danger small">{{ form.checkout_date.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="col-md-4">
                                                <label for="{{ form.adults.id_for_label }}" class="form-label">Adults *</label>
                                                {{ form.adults }}
                                                {% if form.adults.errors %}
                                                    <div class="text-danger small">{{ form.adults.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="col-md-4">
                                                <label for="{{ form.children.id_for_label }}" class="form-label">Children (0-12)</label>
                                                {{ form.children }}
                                                {% if form.children.errors %}
                                                    <div class="text-danger small">{{ form.children.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="col-md-4">
                                                <label for="{{ form.rooms.id_for_label }}" class="form-label">Rooms *</label>
                                                {{ form.rooms }}
                                                {% if form.rooms.errors %}
                                                    <div class="text-danger small">{{ form.rooms.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Room Preferences -->
                                    <div class="form-section">
                                        <h3 class="section-title">
                                            <i class="fas fa-bed text-primary me-2"></i>Room Preferences
                                        </h3>
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label for="{{ form.room_type.id_for_label }}" class="form-label">Preferred Room Type</label>
                                                {{ form.room_type }}
                                                {% if form.room_type.errors %}
                                                    <div class="text-danger small">{{ form.room_type.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="col-md-6">
                                                <label for="{{ form.bed_preference.id_for_label }}" class="form-label">Bed Preference</label>
                                                {{ form.bed_preference }}
                                                {% if form.bed_preference.errors %}
                                                    <div class="text-danger small">{{ form.bed_preference.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="col-12">
                                                <label class="form-label">Additional Preferences</label>
                                                {{ form.preferences_list }}
                                                {% if form.preferences_list.errors %}
                                                    <div class="text-danger small">{{ form.preferences_list.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Special Requests -->
                                    <div class="form-section">
                                        <h3 class="section-title">
                                            <i class="fas fa-concierge-bell text-primary me-2"></i>Special Requests & Services
                                        </h3>
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label for="{{ form.occasion.id_for_label }}" class="form-label">Special Occasion</label>
                                                {{ form.occasion }}
                                                {% if form.occasion.errors %}
                                                    <div class="text-danger small">{{ form.occasion.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="col-md-6">
                                                <label for="{{ form.arrival_time.id_for_label }}" class="form-label">Expected Arrival Time</label>
                                                {{ form.arrival_time }}
                                                {% if form.arrival_time.errors %}
                                                    <div class="text-danger small">{{ form.arrival_time.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="col-12">
                                                <label class="form-label">Additional Services</label>
                                                {{ form.services_list }}
                                                {% if form.services_list.errors %}
                                                    <div class="text-danger small">{{ form.services_list.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="col-12">
                                                <label for="{{ form.special_requests.id_for_label }}" class="form-label">Additional Requests or Comments</label>
                                                {{ form.special_requests }}
                                                {% if form.special_requests.errors %}
                                                    <div class="text-danger small">{{ form.special_requests.errors.0 }}</div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Submit Button -->
                                    <div class="text-center">
                                        <button type="submit" class="btn btn-primary btn-lg px-5">
                                            <i class="fas fa-calendar-check me-2"></i>Submit Booking Request
                                        </button>
                                        <p class="text-muted mt-3 small">
                                            <i class="fas fa-info-circle me-1"></i>
                                            This is a booking request. We'll contact you within 24 hours to confirm availability and finalize your reservation.
                                        </p>
                                    </div>
                                </form>
                            </div>

                            <!-- Booking Summary Sidebar -->
                            <div class="col-lg-4">
                                <div class="booking-summary">
                                    <h4 class="mb-4">
                                        <i class="fas fa-receipt text-primary me-2"></i>Booking Summary
                                    </h4>
                                    
                                    <div class="summary-section">
                                        <h6>Stay Details</h6>
                                        <div class="summary-item">
                                            <span>Check-in:</span>
                                            <span id="summary-checkin">-</span>
                                        </div>
                                        <div class="summary-item">
                                            <span>Check-out:</span>
                                            <span id="summary-checkout">-</span>
                                        </div>
                                        <div class="summary-item">
                                            <span>Nights:</span>
                                            <span id="summary-nights">-</span>
                                        </div>
                                        <div class="summary-item">
                                            <span>Guests:</span>
                                            <span id="summary-guests">-</span>
                                        </div>
                                        <div class="summary-item">
                                            <span>Rooms:</span>
                                            <span id="summary-rooms">-</span>
                                        </div>
                                    </div>

                                    <div class="summary-section">
                                        <h6>Estimated Pricing</h6>
                                        <div class="summary-item">
                                            <span>Room Rate (per night):</span>
                                            <span id="summary-rate">$299</span>
                                        </div>
                                        <div class="summary-item">
                                            <span>Total Room Cost:</span>
                                            <span id="summary-total">$0</span>
                                        </div>
                                        <div class="summary-item">
                                            <span>Taxes & Fees:</span>
                                            <span id="summary-taxes">$0</span>
                                        </div>
                                        <div class="summary-total">
                                            <strong>Estimated Total: <span id="summary-grand-total">$0</span></strong>
                                        </div>
                                    </div>

                                    <div class="summary-section">
                                        <h6>Contact Information</h6>
                                        <div class="contact-info">
                                            <p><i class="fas fa-phone text-primary me-2"></i>+1 (555) 123-4567</p>
                                            <p><i class="fas fa-envelope text-primary me-2"></i>reservations@banbasresort.com</p>
                                            <p class="small text-muted">Available 24/7 for assistance</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Quick Inquiry Section -->
<section class="section bg-light">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="quick-inquiry">
                    <div class="text-center mb-4">
                        <h3>Have Questions? Quick Inquiry</h3>
                        <p>Need help with your booking or have specific questions? Send us a quick message.</p>
                    </div>
                    <form id="inquiry-form" class="row g-3">
                        <div class="col-md-6">
                            <input type="text" name="inquiry_name" class="form-control" placeholder="Your Name" required>
                        </div>
                        <div class="col-md-6">
                            <input type="email" name="inquiry_email" class="form-control" placeholder="Your Email" required>
                        </div>
                        <div class="col-12">
                            <textarea name="inquiry_message" class="form-control" rows="3" placeholder="Your question or message..." required></textarea>
                        </div>
                        <div class="col-12 text-center">
                            <button type="submit" class="btn btn-outline-primary">
                                <i class="fas fa-paper-plane me-2"></i>Send Inquiry
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}